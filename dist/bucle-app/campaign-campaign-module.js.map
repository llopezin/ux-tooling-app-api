{"version":3,"sources":["./src/app/campaign/campaign.module.ts","./src/app/campaign/components/task-summary/task-summary.component.ts","./src/app/campaign/components/task-summary/task-summary.component.html","./src/app/campaign/campaign.component.ts","./src/app/campaign/campaign.component.html","./src/app/campaign/campaign-routing.module.ts","./src/app/campaign/components/task-summaries-list/task-summaries-list.component.ts","./src/app/campaign/components/task-summaries-list/task-summaries-list.component.html"],"names":[],"mappings":"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","file":"campaign-campaign-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { CampaignRoutingModule } from './campaign-routing.module';\r\nimport { CampaignComponent } from './campaign.component';\r\nimport { CampaignService } from './services/campaign.service';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TaskSummariesListComponent } from './components/task-summaries-list/task-summaries-list.component';\r\nimport { TaskSummaryComponent } from './components/task-summary/task-summary.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [CampaignComponent, TaskSummariesListComponent, TaskSummaryComponent],\r\n  imports: [\r\n    CommonModule,\r\n    CampaignRoutingModule,\r\n  ],\r\n  providers: [CampaignService]\r\n})\r\nexport class CampaignModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Task } from '../../models/task.model';\n\n@Component({\n  selector: 'app-task-summary',\n  templateUrl: './task-summary.component.html',\n  styleUrls: ['./task-summary.component.css']\n})\nexport class TaskSummaryComponent implements OnInit {\n\n  @Input() task: Task\n  public linkCopied: boolean = false\n  public campaign_id: string;\n\n  constructor( route: ActivatedRoute) { \n    this.campaign_id = route.snapshot.paramMap.get('id')\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => { this.setProgress() }, 500);\n  }\n\n  setProgress() {\n    let usersRequired = this.task.usersRequired || 10\n    let progressBar = document.getElementById(this.task._id)\n    let progress = (this.task.responses.length / usersRequired) * 100\n\n    progressBar.style.width = `${progress}%`\n    progressBar.style.display = `block`\n  }\n\n  copyLinkToClipboard(){\n    let textArea = document.getElementById(`link${this.task._id}`) as HTMLInputElement\n    textArea.focus();\n    textArea.select();\n    document.execCommand('copy');\n\n    this.changeButtonMessage()\n  }\n\n  changeButtonMessage(){\n    this.linkCopied = true\n    setTimeout( ()=>{this.linkCopied = false} ,2000)\n  }\n\n\n}\n","<div class=\"[ flex flex-col justify-between h-full p-6 mt-6 ] [ bg-background ] [ rounded-lg shadow-2xl ]\">\n\n\n    <h3 class=\"[ font-bold ]\">{{task.name}}</h3>\n\n    <textarea class=\"[ sr-only ]\" [id]=\"'link'+task._id\"\n        [value]=\"'http://localhost:4200/complete-task/'+task._id\"></textarea>\n\n    <button class=\"[ -mt-3 ] [ text-left underline ]\" (click)=\"copyLinkToClipboard()\">{{linkCopied ? 'Copied to clipboard' :'Copy link'}}</button>\n\n\n    <div class=\"[ relative mt-4 ]\">\n\n        <p>{{task.active ? \"In progress\" : \"Not started\"}}</p>\n        <div class=\"[ absolute top-0 right-0 ]\">{{task.responses.length || 0}}/{{task.usersRequired || 10}}</div>\n\n        <div class=\"[ w-full h-4 mx-auto ] [ bg-white ] [ border border-text rounded-full ]\">\n            <div class=\"[ h-full hidden ] [ bg-primary ] [ rounded-full ]\" [id]=\"task._id\"></div>\n        </div>\n\n    </div>\n\n\n    <div class=\"[ w-full flex mt-4 ]\">\n\n        <button class=\"[ lozenge ] [ flex-grow mr-2 ] [ bg-primary-light ]\"\n            [routerLink]=\"['/results', task._id, task.type]\">Results</button>\n        <button class=\"[ lozenge ] [ flex-grow ] [ bg-primary ]\" [routerLink]=\"['/campaign', campaign_id, 'update-task', task._id]\">Edit</button>\n\n    </div>\n\n\n</div>","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../app.reducers';\nimport { Campaign } from '../dashboard/models/campaign.model';\nimport { UserStoreService } from '../shared/services/user-store.service';\nimport { getCampaigns, getWorkspace } from '../shared/store/workspace-store/workspace.actions';\n\n@Component({\n  selector: 'app-campaign',\n  templateUrl: './campaign.component.html',\n  styleUrls: ['./campaign.component.css']\n})\nexport class CampaignComponent implements OnInit {\n  id: number;\n  public campaign: Campaign;\n\n  constructor(private route: ActivatedRoute, private store: Store<AppState>, private localStore: UserStoreService) { }\n\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.id = params['id'];\n\n     \n\n      this.store.select('workspaceApp').subscribe((state) => {\n        const {workspace, loading} = state;\n\n       if(loading) return\n       if(workspace?.campaigns) this.getCampaignFromStore(workspace.campaigns)\n       if(!workspace){ this.getWorkspace()}\n       if(workspace && !workspace.campaigns){this.getCampaigns(workspace)}\n      }) \n    });\n  }\n\n  getCampaignFromStore(campaigns){\n    this.campaign = campaigns.find(campaign=>{return campaign._id == this.id})\n  }\n\n  getWorkspace(){\n    this.store.dispatch(getWorkspace())\n  }\n\n  getCampaigns(workspace){\n    this.store.dispatch(getCampaigns({campaign_ids: workspace.campaign_ids}))\n  }\n}","<div class=\"[ grid grid-cols-4 ]\">\n\n<!-- \n    <aside class=\"[ bg-contrast ] \">\n        <nav>\n            <ul>\n                <li class=\"[ p-4 py-6 ]\">Tasks</li>\n                <li class=\"[ p-4 py-6 ]\">Report</li>\n            </ul>\n        </nav>\n    </aside> -->\n\n\n    <!-- <div class=\"[ p-4 pt-8 ] [ col-start-2 col-end-5 ]\"> -->\n    <div class=\"[ p-4 pt-8 ] [ col-start-1 col-end-5 ]\">\n\n        <h2 class=\"[ heading__secondary ]\">{{campaign?.name}}</h2>\n        <button class=\"[ btn__primary-color ] [ -mt-8 ] [ float-right ]\" routerLink=\"new-task\">New task</button>\n\n        <section title=\"Tasks\">\n\n            <app-task-summaries-list></app-task-summaries-list>\n    \n        </section>\n\n    </div>\n\n    \n</div>","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService } from '../shared/guards/auth-guard.service';\nimport { CampaignComponent } from './campaign.component';\n\nconst routes: Routes = [{\n   path: '', component: CampaignComponent, canActivate: [AuthGuardService] }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CampaignRoutingModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { AppState } from 'src/app/app.reducers';\nimport { Campaign } from 'src/app/dashboard/models/campaign.model';\nimport { getTasks } from 'src/app/shared/store/workspace-store/workspace.actions';\nimport { Task } from 'src/app/tasks/create-task/models/task';\n\n@Component({\n  selector: 'app-task-summaries-list',\n  templateUrl: './task-summaries-list.component.html',\n  styleUrls: ['./task-summaries-list.component.css']\n})\nexport class TaskSummariesListComponent implements OnInit, OnDestroy {\n\n  public tasks: Task[]\n  public campaign: Campaign\n  public campaign_id: string\n  private storeSubscription: any\n\n  constructor(private store: Store<AppState>, private route: ActivatedRoute) {\n    this.campaign_id = this.route.snapshot.paramMap.get('id')\n   }\n\n  ngOnInit(): void {\n    this.storeSubscription = this.store.select('workspaceApp').subscribe(state=>{\n      if(state.loading) return\n\n      this.updateCampaign(state)  \n      if(this.campaign?.user_task_ids)this.getTasks()\n    }) \n  }\n\n  getTasks(){\n    if(this.campaign.tasks?.length === this.campaign.user_task_ids.length)return\n\n   this.store.dispatch(getTasks({task_ids: this.campaign.user_task_ids}))\n  }\n\n  updateCampaign(state){\n    this.campaign = state.workspace?.campaigns?.find(campaign=>campaign._id == this.campaign_id)\n  }\n\n  ngOnDestroy(): void {\n    this.storeSubscription.unsubscribe()\n  }\n}\n","<div class=\"[ grid grid-cols-4 gap-8 p-3 ]\">\n\n    <div class=\"[ flex justify-center items-center col-span-full h-24 my-5 ] [ shadow-lg rounded-lg ] [ bg-background ]\"\n     *ngIf=\"campaign?.tasks?.length === 0\">You have not added any tasks yet</div>\n\n    <div *ngFor=\"let task of campaign?.tasks\">\n        <app-task-summary [task]=\"task\"></app-task-summary>\n    <div>\n\n</div>"],"sourceRoot":"webpack:///"}